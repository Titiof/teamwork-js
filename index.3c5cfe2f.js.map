{"mappings":"gfAAAA,EAAA,S,sBAEcC,SAASC,cAAc,UAArC,IACMC,EAAeF,SAASC,cAAc,kBACtCE,EAAcH,SAASC,cAAc,UACrCG,EAAkBJ,SAASC,cAAc,eACzCI,EAAuBL,SAASC,cAAc,kBACnCD,SAASC,cAAc,oBAiCxC,IAAMK,EAAY,GACdC,EAAY,GAEhB,SAASA,EAAWC,G,IAAEC,EAAFD,EAAEC,IAAKC,EAAPF,EAAOE,WAAYC,EAAnBH,EAAmBG,MAAOC,EAA1BJ,EAA0BI,OAAQC,EAAlCL,EAAkCK,UAAWC,EAA7CN,EAA6CM,YAC7DP,EAAa,CAACE,MAAKC,aAAYC,QAAOC,SAAQC,YAAWC,c,CAe7D,SAASC,EAAuBC,GAC5B,GAAwB,WAArBC,EAAEC,OAAOC,QAAqB,CACVZ,EAAWE,IAA9B,IACMW,EAAcd,EAAUe,QAAO,SAAAC,G,OAAMA,IAAON,C,KAC/B,IAAhBI,IACCd,EAAUiB,OAAOH,EAAa,GAC9BI,aAAaC,QAAQ,gBAAiBC,KAAKC,UAAUrB,IACrDD,EAAqBuB,UAAUC,IAAI,aACnCzB,EAAgBwB,UAAUE,OAAQ,a,EAI9C1B,EAAgB2B,iBAAiB,SAxBjC,SAA2Bf,GACC,WAArBC,EAAEC,OAAOC,SACLZ,IACCD,EAAU0B,KAAKzB,GACfiB,aAAaC,QAAQ,gBAAiBC,KAAKC,UAAUrB,IACrDF,EAAgBwB,UAAUC,IAAI,aAC9BxB,EAAqBuB,UAAUE,OAAQ,aACvCzB,EAAqB0B,iBAAiB,QAAShB,G,IAmB3DZ,EAAY8B,QAAU,WACpB/B,EAAa0B,UAAUE,OAAO,UAC9B9B,SAASkC,KAAKN,UAAUE,OAAO,a,EAGjCK,OAAOJ,iBAAiB,WAAW,SAASd,GAC5B,WAAVA,EAAEmB,MACJlC,EAAa0B,UAAUE,OAAO,UAC9B9B,SAASkC,KAAKN,UAAUE,OAAO,c","sources":["src/js/modal.js"],"sourcesContent":["import { BooksAPI } from './books-api';\n\nconst modal = document.querySelector('.modal');\nconst modalContent = document.querySelector('.modal-content');\nconst closeButton = document.querySelector('.close');\nconst addToListButton = document.querySelector('.add-button');\nconst removeFromListButton = document.querySelector('.remove-button');\nconst bookCard = document.querySelector('.modal-book-card')\n\nasync function openModal(bookId) {\n  try {\n    const data = await getBooks(bookId);\n    function addMarkup(bookId){\n        bookCard.innerHTML = createMarkup(data);\n    }\n    addMarkup(data);\n    makeBookObjects(data);\n  } catch (error) {\n    console.error(error.message);\n  }\n}\n\nfunction createMarkup(data){\n    const {_id, book_image, title, author, description, buy_links} = data;\n    return `<div class=\"book-id\">\n    <img class=\"modal-cover\" src=\"${book_image}\" alt=\"book cover\">\n    <div class=\"book-info\">\n        <div class=\"heading\">\n            <h1 class=\"modal-title\">${title}</h1>\n            <h3 class=\"modal-author\">${author}</h3>\n        </div>\n        <p class=\"modal-decription\">${description}</p>\n        <ul class=\"book-shops\">\n            <li class=\"shop\"><a href=\"${buy_links[0].url}\" class=\"shop-link\" target=\"_blank\"></a></li>\n            <li class=\"shop\"><a href=\"${buy_links[1].url}\" class=\"shop-link\" target=\"_blank\"></a></li>\n        </ul>\n    </div>\n</div>`\n}\n\nconst bookArray = [];\nlet bookObject ={};\n\nfunction bookObject({ _id, book_image, title, author, buy_links, description }){\n    bookObject = {_id, book_image, title, author, buy_links, description}\n}\n\nfunction addToShoppingList(bookId) {\n    if(e.target.tagName === 'BUTTON'){\n        if(bookObject){\n            bookArray.push(bookObject);\n            localStorage.setItem('shopping-list', JSON.stringify(bookArray));\n            addToListButton.classList.add('is-hidden');\n            removeFromListButton.classList.remove(('is-hidden'));\n            removeFromListButton.addEventListener('click', removeFromShoppingList)\n        }\n    }\n}\n\nfunction removeFromShoppingList(bookId) {\n    if(e.target.tagName === 'BUTTON'){\n        const removeBook = bookObject._id;\n        const removeIndex = bookArray.filter(id => id !== bookId);\n        if(removeIndex !== -1){\n            bookArray.splice(removeIndex, 1);\n            localStorage.setItem('shopping-list', JSON.stringify(bookArray));\n            removeFromListButton.classList.add('is-hidden');\n            addToListButton.classList.remove(('is-hidden'));\n        }\n    } \n}\naddToListButton.addEventListener('click', addToShoppingList);\n\ncloseButton.onClick = function(){\n  modalContent.classList.remove('active')\n  document.body.classList.remove('modal-open')\n}\n\nwindow.addEventListener('keydown', function(e){\n  if (e.key === 'Escape') {\n    modalContent.classList.remove('active')\n    document.body.classList.remove('modal-open')\n  }\n});"],"names":["parcelRequire","document","querySelector","$40873ecf3c18e122$var$modalContent","$40873ecf3c18e122$var$closeButton","$40873ecf3c18e122$var$addToListButton","$40873ecf3c18e122$var$removeFromListButton","$40873ecf3c18e122$var$bookArray","$40873ecf3c18e122$var$bookObject","param","_id","book_image","title","author","buy_links","description","$40873ecf3c18e122$var$removeFromShoppingList","bookId","e","target","tagName","removeIndex","filter","id","splice","localStorage","setItem","JSON","stringify","classList","add","remove","addEventListener","push","onClick","body","window","key"],"version":3,"file":"index.3c5cfe2f.js.map"}