{"mappings":"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","sources":["src/js/login.js","src/js/login-darkmode.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport {\n  createUserWithEmailAndPassword,\n  getAuth,\n  sendEmailVerification,\n  signInWithEmailAndPassword,\n  updateProfile,\n} from 'firebase/auth';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyBcETIWRzdvvBXoViQftnTvFFLpHkebOhw',\n  authDomain: 'book-bc5e2.firebaseapp.com',\n  projectId: 'book-bc5e2',\n  storageBucket: 'book-bc5e2.appspot.com',\n  messagingSenderId: '258455649332',\n  appId: '1:258455649332:web:4a54c5fd8564a412d79e61',\n  measurementId: 'G-2EMZHHRVM8',\n};\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nlet activeTab = 'signup';\nlet error = '';\n\nconst refs = {\n  signinBtn: document.querySelector('.login-sign-in'),\n  signupBtn: document.querySelector('.login-sign-up'),\n  closeModalBtn: document.querySelector('.js-login-btn'),\n  modal: document.querySelector('.js-backdrop'),\n  form: document.querySelector('.js-login-form'),\n  inputName: document.querySelector('#user_name'),\n  email: document.querySelector('#user_email'),\n  password: document.querySelector('#user_password'),\n  loginSubmitBtn: document.querySelector('.login-submit-btn'),\n  containerNameInput: document.querySelector('#login-field-name'),\n};\n\nrefs.closeModalBtn.addEventListener('click', onCloseModalClick);\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.signinBtn.addEventListener('click', onSigninClick);\nrefs.signupBtn.addEventListener('click', onSignupClick);\n\nfunction onSigninClick() {\n  refs.form.reset();\n\n  activeTab = 'signin';\n  changeActiveTab();\n}\n\nfunction onSignupClick() {\n  refs.form.reset();\n\n  activeTab = 'signup';\n  changeActiveTab();\n}\n\nfunction changeActiveTab() {\n  if (activeTab === 'signin') {\n    refs.signupBtn.classList.remove('active');\n    refs.signinBtn.classList.add('active');\n    refs.containerNameInput.classList.add('is-hidden');\n    refs.inputName.required = false;\n\n    refs.loginSubmitBtn.textContent = 'Sign in';\n  }\n  if (activeTab === 'signup') {\n    refs.signupBtn.classList.add('active');\n    refs.signinBtn.classList.remove('active');\n    refs.containerNameInput.classList.remove('is-hidden');\n    refs.inputName.required = true;\n    refs.loginSubmitBtn.textContent = 'Sign up';\n  }\n}\n\nfunction onCloseModalClick() {\n  window.history.back();\n}\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  activeTab === 'signup' ? signup() : signin();\n}\n\nasync function signup() {\n  try {\n    // створюєм нового користувача\n    const userCredential = await createUserWithEmailAndPassword(\n      auth,\n      refs.email.value,\n      refs.password.value\n    );\n\n    // якщо створено успішно\n    if (userCredential && auth.currentUser) {\n      sendEmailVerification(auth.currentUser);\n      updateProfile(auth.currentUser, {\n        displayName: refs.inputName.value,\n        photoURL: 'https://picsum.photos/50/50?random=1',\n      });\n      Notify.success('Registration was successful!');\n\n      setTimeout(function () {\n        window.location.href = '/teamwork-js/';\n      }, 500);\n    }\n  } catch (error) {\n    if (error.code === 'auth/email-already-in-use') {\n      Notify.warning(\n        'This email address is already registered. Please go to the tab signin.'\n      );\n    } else {\n      Notify.error('An error occurred during registration.');\n    }\n  }\n}\n\nasync function signin() {\n  try {\n    //звертаємось до юзера (повертається url, name, email)\n    const userCredential = await signInWithEmailAndPassword(\n      auth,\n      refs.email.value,\n      refs.password.value\n    );\n    const user = userCredential.user;\n    console.log(user); // повертається  url, name, email\n    // localStorage.setItem('user', JSON.stringify(user));\n    refs.form.reset();\n    error = '';\n    Notify.success('Authorization was successful!');\n\n    setTimeout(function () {\n      window.location.href = '/teamwork-js/';\n    }, 500);\n  } catch (error) {\n    const errorCode = error.code;\n    const errorMessage = error.message;\n    error = 'Invalid user email or password';\n    Notify.failure(error);\n  }\n}\n// перевірка, якщо юзер авторизований - змінюємо розмітку \nauth.onAuthStateChanged(function (user) {\n  console.log('perevirka', user);\n\n  if (user) {\n    Notify.success(\n      `Successful authorized! You will be redirected to the home page`\n    );\n  } else {\n    Notify.info('Need authorized');\n  }\n});\n\n/// це додати в шопінг ліст\n// import {\n//   collection,\n//   doc,\n//   getDocs,\n//   getFirestore,\n//   setDoc,\n// } from 'firebase/firestore';\n\n// const db = getFirestore(app);\n\n// const shoppingRef = collection(db, 'shopping-list');\n\n// //як дістати з бази всі книги\n// const querySnapshot = getDocs(shoppingRef).then(res => {\n//   res.forEach(doc => {\n//     console.log(doc.data());\n//   });\n// });\n\n// //як додати до бази даних книгу с айді\n// setDoc(doc(shoppingRef, 'list_name'), {\n//   id: 231231,\n// });\n","// check for saved 'darkMode' in localStorage\nlet darkMode = localStorage.getItem('darkMode'); \n\nconst darkModeToggle = document.querySelector('#dark-mode-toggle');\nconst darkModeToggleTwo = document.querySelector('#dark-mode-toggle-two');\nconst darkModeCheckbox = document.querySelector('.checkbox'); // Get the checkbox element\n\nconst enableDarkMode = () => {\n  // 1. Add the class to the body\n  document.body.classList.add('darkmode');\n  \n  // 2. Update darkMode in localStorage\n    localStorage.setItem('darkMode', 'enabled');\n     // 3. Check the checkbox\n  darkModeCheckbox.checked = true;\n}\n\nconst disableDarkMode = () => {\n  // 1. Remove the class from the body\n  document.body.classList.remove('darkmode');\n  // 2. Update darkMode in localStorage \n    localStorage.setItem('darkMode', null);\n      // 3. Uncheck the checkbox\n     darkModeCheckbox.checked = false;\n}\n \n// If the user already visited and enabled darkMode\n// start things off with it on\nif (darkMode === 'enabled') {\n  enableDarkMode();\n}\n\n// When someone clicks the first toggle\ndarkModeToggle.addEventListener('click', () => {\n  // Get the current state of dark mode\n  darkMode = localStorage.getItem('darkMode');\n  \n  // Toggle the state based on the current value\n  if (darkMode !== 'enabled') {\n    enableDarkMode();\n    darkModeToggleTwo.checked = true;\n  } else {\n    disableDarkMode();\n    darkModeToggleTwo.checked = false;\n  }\n});\n\n// When someone clicks the second toggle\ndarkModeToggleTwo.addEventListener('click', () => {\n  // Get the current state of dark mode for the second toggle\n  darkMode = localStorage.getItem('darkMode');\n  \n  // Toggle the state based on the current value\n  if (darkMode !== 'enabled') {\n    enableDarkMode();\n    darkModeToggle.checked = true;\n  } else {\n    disableDarkMode();\n    darkModeToggle.checked = false;\n  }\n});"],"names":["$gKkQl","parcelRequire","$27435ee7e70aa165$var$app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","$27435ee7e70aa165$var$auth","$eyjy7","getAuth","$27435ee7e70aa165$var$activeTab","$27435ee7e70aa165$var$error","$27435ee7e70aa165$var$refs","signinBtn","document","querySelector","signupBtn","closeModalBtn","modal","form","inputName","email","password","loginSubmitBtn","containerNameInput","$27435ee7e70aa165$var$changeActiveTab","classList","remove","add","required","textContent","addEventListener","window","history","back","async","e","preventDefault","createUserWithEmailAndPassword","value","currentUser","sendEmailVerification","updateProfile","displayName","photoURL","$iQIUW","Notify","success","setTimeout","location","href","error1","code","warning","error","$27435ee7e70aa165$var$signup","user","signInWithEmailAndPassword","console","log","reset","error2","message","failure","$27435ee7e70aa165$var$signin","onAuthStateChanged","info","$e9241b569a6fd406$var$darkMode","localStorage","getItem","$e9241b569a6fd406$var$darkModeToggle","$e9241b569a6fd406$var$darkModeToggleTwo","$e9241b569a6fd406$var$darkModeCheckbox","$e9241b569a6fd406$var$enableDarkMode","body","setItem","checked","$e9241b569a6fd406$var$disableDarkMode"],"version":3,"file":"login.c60b8cda.js.map"}