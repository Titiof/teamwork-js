{"mappings":"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","sources":["src/js/login.js","src/js/login-darkmode.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport {\n  createUserWithEmailAndPassword,\n  getAuth,\n  sendEmailVerification,\n  signInWithEmailAndPassword,\n  updateProfile,\n} from 'firebase/auth';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyBcETIWRzdvvBXoViQftnTvFFLpHkebOhw',\n  authDomain: 'book-bc5e2.firebaseapp.com',\n  projectId: 'book-bc5e2',\n  storageBucket: 'book-bc5e2.appspot.com',\n  messagingSenderId: '258455649332',\n  appId: '1:258455649332:web:4a54c5fd8564a412d79e61',\n  measurementId: 'G-2EMZHHRVM8',\n};\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nlet activeTab = 'signup';\nlet error = '';\n\nconst refs = {\n  signinBtn: document.querySelector('.login-sign-in'),\n  signupBtn: document.querySelector('.login-sign-up'),\n  closeModalBtn: document.querySelector('.js-login-btn'),\n  modal: document.querySelector('.js-backdrop'),\n  form: document.querySelector('.js-login-form'),\n  inputName: document.querySelector('#user_name'),\n  email: document.querySelector('#user_email'),\n  password: document.querySelector('#user_password'),\n  loginSubmitBtn: document.querySelector('.login-submit-btn'),\n  containerNameInput: document.querySelector('#login-field-name'),\n};\n\nrefs.closeModalBtn.addEventListener('click', onCloseModalClick);\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.signinBtn.addEventListener('click', onSigninClick);\nrefs.signupBtn.addEventListener('click', onSignupClick);\n\nfunction onSigninClick() {\n  refs.form.reset();\n\n  activeTab = 'signin';\n  changeActiveTab();\n}\n\nfunction onSignupClick() {\n  refs.form.reset();\n\n  activeTab = 'signup';\n  changeActiveTab();\n}\n\nfunction changeActiveTab() {\n  if (activeTab === 'signin') {\n    refs.signupBtn.classList.remove('active');\n    refs.signinBtn.classList.add('active');\n    refs.containerNameInput.classList.add('is-hidden');\n    refs.inputName.required = false;\n\n    refs.loginSubmitBtn.textContent = 'Sign in';\n  }\n  if (activeTab === 'signup') {\n    refs.signupBtn.classList.add('active');\n    refs.signinBtn.classList.remove('active');\n    refs.containerNameInput.classList.remove('is-hidden');\n    refs.inputName.required = true;\n    refs.loginSubmitBtn.textContent = 'Sign up';\n  }\n}\n\nfunction onCloseModalClick() {\n  window.history.back();\n}\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  activeTab === 'signup' ? signup() : signin();\n}\n\nasync function signup() {\n  try {\n    // створюєм нового користувача\n    const userCredential = await createUserWithEmailAndPassword(\n      auth,\n      refs.email.value,\n      refs.password.value\n    );\n\n    // якщо створено успішно\n    if (userCredential && auth.currentUser) {\n      sendEmailVerification(auth.currentUser);\n      updateProfile(auth.currentUser, {\n        displayName: refs.inputName.value,\n        photoURL: 'https://picsum.photos/50/50?random=1',\n      });\n      Notify.success('Registration was successful!');\n\n      setTimeout(function () {\n        window.location.href = '/teamwork-js/';\n      }, 500);\n    }\n  } catch (error) {\n    if (error.code === 'auth/email-already-in-use') {\n      Notify.warning(\n        'This email address is already registered. Please go to the tab signin.'\n      );\n    } else {\n      Notify.error('An error occurred during registration.');\n    }\n  }\n}\n\nasync function signin() {\n  try {\n    //звертаємось до юзера (повертається url, name, email)\n    const userCredential = await signInWithEmailAndPassword(\n      auth,\n      refs.email.value,\n      refs.password.value\n    );\n    const user = userCredential.user;\n    console.log(user); // повертається  url, name, email\n    // localStorage.setItem('user', JSON.stringify(user));\n    refs.form.reset();\n    error = '';\n    Notify.success('Authorization was successful!');\n\n    setTimeout(function () {\n      window.location.href = '/teamwork-js/';\n    }, 500);\n  } catch (error) {\n    const errorCode = error.code;\n    const errorMessage = error.message;\n    error = 'Invalid user email or password';\n    Notify.failure(error);\n  }\n}\n// перевірка, якщо юзер авторизований - змінюємо розмітку \nauth.onAuthStateChanged(function (user) {\n  console.log('perevirka', user);\n\n  if (user) {\n    Notify.success(\n      `Successful authorized! You will be redirected to the home page`\n    );\n  } else {\n    Notify.info('Need authorized');\n  }\n});\n\n/// це додати в шопінг ліст\n// import {\n//   collection,\n//   doc,\n//   getDocs,\n//   getFirestore,\n//   setDoc,\n// } from 'firebase/firestore';\n\n// const db = getFirestore(app);\n\n// const shoppingRef = collection(db, 'shopping-list');\n\n// //як дістати з бази всі книги\n// const querySnapshot = getDocs(shoppingRef).then(res => {\n//   res.forEach(doc => {\n//     console.log(doc.data());\n//   });\n// });\n\n// //як додати до бази даних книгу с айді\n// setDoc(doc(shoppingRef, 'list_name'), {\n//   id: 231231,\n// });\n","// check for saved 'darkMode' in localStorage\nlet darkMode = localStorage.getItem('darkMode'); \n\nconst darkModeToggle = document.querySelector('#dark-mode-toggle');\nconst darkModeToggleTwo = document.querySelector('#dark-mode-toggle-two');\nconst darkModeCheckbox = document.querySelector('.checkbox'); // Get the checkbox element\n\nconst enableDarkMode = () => {\n  // 1. Add the class to the body\n  document.body.classList.add('darkmode');\n  \n  // 2. Update darkMode in localStorage\n    localStorage.setItem('darkMode', 'enabled');\n     // 3. Check the checkbox\n  darkModeCheckbox.checked = true;\n}\n\nconst disableDarkMode = () => {\n  // 1. Remove the class from the body\n  document.body.classList.remove('darkmode');\n  // 2. Update darkMode in localStorage \n    localStorage.setItem('darkMode', null);\n      // 3. Uncheck the checkbox\n     darkModeCheckbox.checked = false;\n}\n \n// If the user already visited and enabled darkMode\n// start things off with it on\nif (darkMode === 'enabled') {\n  enableDarkMode();\n}\n\n// When someone clicks the first toggle\ndarkModeToggle.addEventListener('click', () => {\n  // Get the current state of dark mode\n  darkMode = localStorage.getItem('darkMode');\n  \n  // Toggle the state based on the current value\n  if (darkMode !== 'enabled') {\n    enableDarkMode();\n    darkModeToggleTwo.checked = true;\n  } else {\n    disableDarkMode();\n    darkModeToggleTwo.checked = false;\n  }\n});\n\n// When someone clicks the second toggle\ndarkModeToggleTwo.addEventListener('click', () => {\n  // Get the current state of dark mode for the second toggle\n  darkMode = localStorage.getItem('darkMode');\n  \n  // Toggle the state based on the current value\n  if (darkMode !== 'enabled') {\n    enableDarkMode();\n    darkModeToggle.checked = true;\n  } else {\n    disableDarkMode();\n    darkModeToggle.checked = false;\n  }\n});"],"names":["$bpxeT","parcelRequire","$2e9821e67a93167d$var$app","$fkNhc","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","$2e9821e67a93167d$var$auth","$gQOBw","getAuth","$2e9821e67a93167d$var$activeTab","$2e9821e67a93167d$var$refs","signinBtn","document","querySelector","signupBtn","closeModalBtn","modal","form","inputName","email","password","loginSubmitBtn","containerNameInput","$2e9821e67a93167d$var$changeActiveTab","classList","remove","add","required","textContent","$2e9821e67a93167d$var$_onFormSubmit","$parcel$interopDefault","$2TvXO","mark","_callee","e","preventDefault","$2e9821e67a93167d$var$signup","$2e9821e67a93167d$var$signin","apply","this","arguments","$2e9821e67a93167d$var$_signup","createUserWithEmailAndPassword","value","_ctx","sent","currentUser","sendEmailVerification","updateProfile","displayName","photoURL","$h6c0i","Notify","success","setTimeout","window","location","href","t0","code","warning","error","$2e9821e67a93167d$var$_signin","userCredential","user","signInWithEmailAndPassword","console","log","reset","message","failure","addEventListener","history","back","onAuthStateChanged","info","$357a533ad93a2414$var$darkMode","localStorage","getItem","$357a533ad93a2414$var$darkModeToggle","$357a533ad93a2414$var$darkModeToggleTwo","$357a533ad93a2414$var$darkModeCheckbox","$357a533ad93a2414$var$enableDarkMode","body","setItem","checked","$357a533ad93a2414$var$disableDarkMode"],"version":3,"file":"login.46530d45.js.map"}